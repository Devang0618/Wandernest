<!-- dashboard_owner.html -->
{% extends 'base.html' %}
{% block title %}Owner Dashboard{% endblock %}
{% block content %}
<div class="dashboard-container"><form style="max-width: 1000px;">
  <div class="dashboard-header">
    <h1>Welcome to the Owner Dashboard, {{ user_data.username }} üòáüôè</h1>
    <p>Your Profile Category: {{ user_data.profile_name }}</p>
  </div>
  <div class="dashboard-content">
    <p>Name: {{ user_data.name }}</p>
    <p>Birth Date: {{ user_data.birth_date }}</p>
    <p>Gender: {{ user_data.gender }}</p>
    <p>Email: {{ user_data.email }}</p>
    <!-- Add specific content for the owner dashboard -->
  </div></form>

<form>
  <div class="dashboard-content">
    <h2>Your Rental Properties</h2>
    {% if rental_properties %}
      {% for property in rental_properties %}
        <p>Address: {{ property.address }}</p>
        <p>Number of Rooms: {{ property.num_rooms }}</p>
        <!-- Add other property details -->
        <a href="{% url 'view_applications' %}">View Applications</a>
        <hr>
      {% endfor %}
    {% else %}
      <p>No rental properties found.</p>
    {% endif %}
    <a href="{% url 'post_rental_property' %}">Post Rental Property</a>
    <a href="{% url 'view_rental_properties' %}">View Rental Properties</a>
  </div>
</form>

<form>
  <div class="dashboard-content">
    <h2>Your Rental Properties</h2>
    {% if rental_properties %}
      <ul>
        {% for property in rental_properties %}
          <li>
            <p>Address: {{ property.address }}</p>
            <p>Number of Rooms: {{ property.num_rooms }}</p>
            <!-- Add other property details -->
            <a href="{% url 'view_applications' %}">View Applications</a>
            {% for application in property.application_set.all %}
              {% if application.status == 'Pending' %}
                <form method="post" action="{% url 'handle_application' application.id %}">
                  {% csrf_token %}
                  <button type="submit" name="action" value="Approve">Approve</button>
                  <button type="submit" name="action" value="Reject">Reject</button>
                </form>
              {% endif %}
            {% empty %}
              <p>No pending applications for this property.</p>
            {% endfor %}
            <hr>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No rental properties found.</p>
    {% endif %}
  </form>
  </div>
  <div class="dashboard-footer">
    <a href="{% url 'logout' %}">Logout</a>
  </div>
</div>
{% endblock %}
